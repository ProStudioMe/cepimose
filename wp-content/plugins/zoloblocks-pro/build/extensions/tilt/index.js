(()=>{"use strict";const e=window.wp.i18n,o=window.wp.hooks,l=window.wp.element,t=window.wp.components,s=window.ReactJSXRuntime;function n(e){let o=[];const l=["zolo-blocks-toolbar","zolo-open-sidebar-settings"],t=e.textContent.trim()&&!e.children.length,s="a"===e.tagName.toLowerCase();if("svg"===e.tagName.toLowerCase()&&o.push("zolo__display-icon"),t||s){const t=Array.from(e.classList).find((e=>e.startsWith("zolo")&&!l.includes(e)));t&&o.push(t)}return Array.from(e.children).forEach((e=>{const l=n(e);o=o.concat(l)})),o}const a=({panelProps:o})=>{const{SimpleRangeControl:a,ZoloPanelBody:i,IconicBtnGroup:r}=window.zoloModule,{attributes:c,setAttributes:p}=o,{zoloTilt:d,parentClasses:u,uniqueId:x}=c,[m,z]=(0,l.useState)(!1),[g,v]=(0,l.useState)([]),{active:b=!1,max:h=15,scale:_=1,direction:C="direct",perspective:f=1e3,maxGlare:w=.3,gyroscope:T=!1,glare:k=!1,advancedOptions:j=!1,selectedClass:y=[]}=d,R=(0,l.useRef)(null),S=(0,l.useRef)(null);(0,l.useEffect)((()=>{const e=window.frames["editor-canvas"]||window,{document:o,VanillaTilt:l}=e,t=o.querySelector(`.${x}`);if(t){R.current=t,S.current=l;const e=Array.from(t.children).map((e=>n(e))).flat(),o=[...new Set(e)].filter((e=>e!==x));v(o)}}),[x]);const G=()=>{R?.current&&S?.current?.init(R?.current,{max:h,scale:_,speed:400,glare:k,"max-glare":w,gyroscope:T,perspective:f,reverse:"opposite"===C})},N=()=>{m?(R&&R?.current?.vanillaTilt.destroy(),z(!1)):(G(),z(!0))};return(0,l.useEffect)((()=>(m&&G(),()=>{R?.current&&R?.current.vanillaTilt&&R?.current?.vanillaTilt.destroy()})),[m,h,_,k,w,T,f,C,R]),(0,s.jsxs)(i,{title:(0,e.__)("Tilt Effects","zoloblocks-pro"),panelProps:o,firstOpen:!1,isPro:!0,isNew:!0,children:[(0,s.jsx)(t.ToggleControl,{label:(0,e.__)("Enable","zoloblocks-pro"),checked:d?.active,onChange:()=>{p({zoloTilt:{...d,active:!d.active}}),d.active?p({parentClasses:u.filter((function(e){return"zolo-tilt"!==e}))}):p({parentClasses:[...u,"zolo-tilt"]}),m&&N()}}),d?.active&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"zolo-flex-row-control-tab",children:(0,s.jsx)(r,{label:(0,e.__)("Direction","zoloblocks-pro"),value:d?.direction||"direct",options:[{label:(0,e.__)("Direct","zoloblocks-pro"),value:"direct"},{label:(0,e.__)("Opposite","zoloblocks-pro"),value:"opposite"}],onChange:e=>p({zoloTilt:{...d,direction:e}})})}),(0,s.jsx)(a,{label:(0,e.__)("Rotation (max)","zoloblocks-pro"),value:d?.max,onChange:e=>p({zoloTilt:{...d,max:e}}),onReset:()=>p({zoloTilt:{...d,max:void 0}}),min:1,max:50,noUnits:!0}),(0,s.jsx)(a,{label:(0,e.__)("Scale","zoloblocks-pro"),value:d?.scale,onChange:e=>p({zoloTilt:{...d,scale:e}}),onReset:()=>p({zoloTilt:{...d,scale:void 0}}),min:.5,max:2,step:.01,noUnits:!0}),(0,s.jsx)(a,{label:(0,e.__)("Perspective","zoloblocks-pro"),value:d?.perspective,onChange:e=>p({zoloTilt:{...d,perspective:e}}),onReset:()=>p({zoloTilt:{...d,perspective:void 0}}),min:500,max:1e3,noUnits:!0}),(0,s.jsx)(t.ToggleControl,{label:(0,e.__)("Gyroscope","zoloblocks-pro"),checked:d?.gyroscope,onChange:()=>{p({zoloTilt:{...d,gyroscope:!d.gyroscope}})}}),(0,s.jsx)(t.ToggleControl,{label:(0,e.__)("Glare","zoloblocks-pro"),checked:d?.glare,onChange:()=>{p({zoloTilt:{...d,glare:!d.glare}})}}),(0,s.jsx)(t.CardDivider,{}),(0,s.jsx)(t.ToggleControl,{label:(0,e.__)("Advanced Options","zoloblocks-pro"),checked:j,onChange:()=>{p({zoloTilt:{...d,advancedOptions:!j}})}}),d?.glare&&(0,s.jsx)(a,{label:(0,e.__)("Max Glare","zoloblocks-pro"),value:d?.maxGlare,onChange:e=>p({zoloTilt:{...d,maxGlare:e}}),onReset:()=>p({zoloTilt:{...d,maxGlare:void 0}}),min:0,max:1,step:.01,noUnits:!0}),j&&(0,s.jsxs)(s.Fragment,{children:[y.length>0&&(0,s.jsxs)("div",{className:"zolo-selected-class",children:[(0,s.jsx)("h4",{children:(0,e.__)("Selected Class","zoloblocks-pro")}),y.map(((e,o)=>(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(a,{label:e.label.split("-").pop(),value:e.value,onChange:e=>p({zoloTilt:{...d,selectedClass:y.map(((l,t)=>t===o?{...l,value:e}:l))}}),onReset:()=>p({zoloTilt:{...d,selectedClass:y.filter(((e,l)=>l!==o))}}),min:0,max:500,noUnits:!0},o)})))]}),(0,s.jsxs)("div",{className:"zolo-suggested-class",children:[g&&g.map((e=>(0,s.jsx)(t.Button,{style:{margin:"5px",padding:"0 5px",lineHeight:"1.5",fontSize:"12px",borderBottom:"1px solid #ddd",display:"inline-block"},onClick:()=>{p({zoloTilt:{...d,selectedClass:[...y,{label:e}]}})},children:e.split("-").pop()},e))),(0,s.jsx)("p",{style:{color:"#777",margin:"10px 0 0 0"},children:(0,e.__)("Note: Advanced effects will be applied on the frontend only.","zoloblocks-pro")})]})]}),(0,s.jsx)(t.CardDivider,{}),(0,s.jsx)(t.Button,{className:"zolo-action-button",variant:"primary",onClick:N,children:m?(0,e.__)("Stop Preview","zoloblocks-pro"):(0,e.__)("Preview Tilt","zoloblocks-pro")})]})]})};(0,o.addFilter)("zolo.extensions.controls.tilt","zolo/extensions/tilt",((e,o,l)=>(e.push((0,s.jsx)(a,{panelProps:l},`tilt-controls-${l.attributes.uniqueId}`)),e)))})();