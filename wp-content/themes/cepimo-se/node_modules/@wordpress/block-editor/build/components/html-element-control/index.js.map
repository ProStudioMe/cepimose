{"version":3,"names":["_i18n","require","_components","_data","_store","_messages","_jsxRuntime","HTMLElementControl","tagName","onChange","clientId","options","label","__","value","checkForMainTag","some","option","hasMainElementElsewhere","useSelect","select","getClientIdsWithDescendants","getBlockAttributes","blockEditorStore","id","modifiedOptions","map","disabled","sprintf","jsxs","__experimentalVStack","spacing","className","children","jsx","SelectControl","__nextHasNoMarginBottom","__next40pxDefaultSize","help","htmlElementMessages","Notice","status","isDismissible"],"sources":["@wordpress/block-editor/src/components/html-element-control/index.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport {\n\tSelectControl,\n\tNotice,\n\t__experimentalVStack as VStack,\n} from '@wordpress/components';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { htmlElementMessages } from './messages';\n\n/**\n * Renders a SelectControl for choosing HTML elements with validation\n * to prevent duplicate <main> elements.\n *\n * @param {Object}   props          Component props.\n * @param {string}   props.tagName  The current HTML tag name.\n * @param {Function} props.onChange Function to call when the tag is changed.\n * @param {string}   props.clientId The client ID of the current block.\n * @param {Array}    props.options  SelectControl options (optional).\n *\n * @return {Component} The HTML element select control with validation.\n */\nexport default function HTMLElementControl( {\n\ttagName,\n\tonChange,\n\tclientId,\n\toptions = [\n\t\t{ label: __( 'Default (<div>)' ), value: 'div' },\n\t\t{ label: '<header>', value: 'header' },\n\t\t{ label: '<main>', value: 'main' },\n\t\t{ label: '<section>', value: 'section' },\n\t\t{ label: '<article>', value: 'article' },\n\t\t{ label: '<aside>', value: 'aside' },\n\t\t{ label: '<footer>', value: 'footer' },\n\t],\n} ) {\n\tconst checkForMainTag =\n\t\t!! clientId && options.some( ( option ) => option.value === 'main' );\n\n\tconst hasMainElementElsewhere = useSelect(\n\t\t( select ) => {\n\t\t\tif ( ! checkForMainTag ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst { getClientIdsWithDescendants, getBlockAttributes } =\n\t\t\t\tselect( blockEditorStore );\n\n\t\t\treturn getClientIdsWithDescendants().some( ( id ) => {\n\t\t\t\t// Skip the current block.\n\t\t\t\tif ( id === clientId ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn getBlockAttributes( id )?.tagName === 'main';\n\t\t\t} );\n\t\t},\n\t\t[ clientId, checkForMainTag ]\n\t);\n\n\t// Create a modified options array that disables the main option if needed.\n\tconst modifiedOptions = options.map( ( option ) => {\n\t\tif (\n\t\t\toption.value === 'main' &&\n\t\t\thasMainElementElsewhere &&\n\t\t\ttagName !== 'main'\n\t\t) {\n\t\t\treturn {\n\t\t\t\t...option,\n\t\t\t\tdisabled: true,\n\t\t\t\tlabel: sprintf(\n\t\t\t\t\t/* translators: %s: HTML element name */\n\t\t\t\t\t__( '%s (Already in use)' ),\n\t\t\t\t\toption.label\n\t\t\t\t),\n\t\t\t};\n\t\t}\n\t\treturn option;\n\t} );\n\n\treturn (\n\t\t<VStack spacing={ 2 } className=\"block-editor-html-element-control\">\n\t\t\t<SelectControl\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t__next40pxDefaultSize\n\t\t\t\tlabel={ __( 'HTML element' ) }\n\t\t\t\toptions={ modifiedOptions }\n\t\t\t\tvalue={ tagName }\n\t\t\t\tonChange={ onChange }\n\t\t\t\thelp={ htmlElementMessages[ tagName ] }\n\t\t\t/>\n\n\t\t\t{ tagName === 'main' && hasMainElementElsewhere && (\n\t\t\t\t<Notice status=\"warning\" isDismissible={ false }>\n\t\t\t\t\t{ __(\n\t\t\t\t\t\t'Multiple <main> elements detected. The duplicate may be in your content or template. This is not valid HTML and may cause accessibility issues. Please change this HTML element.'\n\t\t\t\t\t) }\n\t\t\t\t</Notice>\n\t\t\t) }\n\t\t</VStack>\n\t);\n}\n"],"mappings":"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","ignoreList":[]}